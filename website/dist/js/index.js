async function main(){const t=document.getElementById("chart__canvas-container"),e=document.getElementById("canvas"),n=e.getContext("2d"),o={solar:document.getElementById("solar"),efficiency:document.getElementById("efficiency"),htc:document.getElementById("htc"),storage:document.getElementById("storage")},c={solar:document.getElementById("controls__solar"),efficiency:document.getElementById("controls__efficiency"),htc:document.getElementById("controls__htc"),storage:document.getElementById("controls__storage")},r={deficit:document.getElementById("chart__deficit"),empty:document.getElementById("chart__empty"),surplus:document.getElementById("chart__surplus"),full:document.getElementById("chart__full")},a={numOfYears:11,indoorT:22,solar:20,efficiency:.6,htc:250,storage:50};e.width=t.offsetWidth,e.height=t.offsetHeight;const s=e.height-2,d=(e.width-2)/365,l=await fetch("js/data.json").then((t=>t.json()));for(const[t,e]of Object.entries(o))e.addEventListener("input",(e=>{c[t].textContent=e.target.value,a[t]=e.target.value/e.target.getAttribute("factor"),u()}));function u(){n.clearRect(0,0,e.width,e.height),n.fillStyle="#4CE0D2";const t=[],o=1e3*a.storage;t.push(o);const c=s/a.storage;let u=0,i=0,m=0,f=0;for(let e=0;e<l.Energy.length;e++){const r=a.solar*l.Energy[e]*a.efficiency+Math.min(a.htc*(l.Temperature[e]-a.indoorT)*24,0)+t[e];r>o?(t.push(o),f++,m+=r-o):r<0?(t.push(0),i++,u+=r):t.push(r);const h=e%365*d,g=s-t[e+1]/1e3*c;n.fillRect(h,g,2,2)}r.surplus.textContent=Math.round(m/a.numOfYears/1e3,0),r.deficit.textContent=Math.round(u/a.numOfYears/-1e3,0),r.full.textContent=Math.round(f/a.numOfYears,0),r.empty.textContent=Math.round(i/a.numOfYears,0)}u()}main();