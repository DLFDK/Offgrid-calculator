function input(e,t,n){const a=document.getElementById("range");a.addEventListener("input",(()=>{t.clearRect(0,0,e.width,e.height),t.beginPath(),t.moveTo(0,n[0]/100*(a.value/100));for(let e=1;e<n.length;e++)t.lineTo(e,n[e]/100*(a.value/100));t.stroke()}))}async function main(){const e=document.getElementById("chart__canvas-container"),t=document.getElementById("canvas"),n=t.getContext("2d"),a=document.getElementById("deficitValue"),o=document.getElementById("emptyValue"),c=document.getElementById("surplusValue"),l=document.getElementById("fullValue"),d={indoorT:22,solarArea:20,efficiency:.6,htc:100,storage:50},u=await fetch("js/data.json").then((e=>e.json()));t.width=e.offsetWidth,t.height=e.offsetHeight;const i=t.height-5,r=(t.width-4)/365;n.strokeStyle="#4CE0D2",n.fillStyle="#4CE0D2",B();const g=document.getElementById("solar"),s=document.getElementById("solarValue");g.addEventListener("input",(e=>{const t=e.target.value;s.textContent=""+t,d.solarArea=e.target.value,B()}));const m=document.getElementById("efficiency"),h=document.getElementById("efficiencyValue");m.addEventListener("input",(e=>{h.textContent=e.target.value,d.efficiency=e.target.value/100,B()}));const y=document.getElementById("htc"),f=document.getElementById("htcValue");y.addEventListener("input",(e=>{f.textContent=e.target.value,d.htc=e.target.value,B()}));const E=document.getElementById("storage"),v=document.getElementById("storageValue");function B(){n.clearRect(0,0,t.width,t.height);const e=[],g=1e3*d.storage;e.push(g);const s=i/d.storage;let m,h,y,f=0,E=0,v=0,B=0;for(let t=0;t<u.Energy.length;t++)m=d.solarArea*u.Energy[t]*d.efficiency,h=Math.min(d.htc*(u.Temperature[t]-d.indoorT)*24,0),y=m+h+e[t],y>g?(B++,v=v+y-g,y=g):y<0&&(E++,f+=y,y=0),e.push(y),n.fillRect((t+1)%365*r,i-e[t+1]/1e3*s,2,2);c.textContent=Math.round(v/1e3,0),a.textContent=Math.round(f/-1e3,0),l.textContent=Math.round(B),o.textContent=Math.round(E)}E.addEventListener("input",(e=>{v.textContent=e.target.value,d.storage=e.target.value,B()}))}main();