async function main(){const t=document.getElementById("chart__canvas-container"),e=document.getElementById("canvas"),n=e.getContext("2d"),o={solar:document.getElementById("solar"),efficiency:document.getElementById("efficiency"),htc:document.getElementById("htc"),storage:document.getElementById("storage")},c={solar:document.getElementById("controls__solar"),efficiency:document.getElementById("controls__efficiency"),htc:document.getElementById("controls__htc"),storage:document.getElementById("controls__storage")},r={deficit:document.getElementById("chart__deficit"),empty:document.getElementById("chart__empty"),surplus:document.getElementById("chart__surplus"),full:document.getElementById("chart__full")},d={indoorT:22,solar:20,efficiency:.6,htc:250,storage:50};e.width=t.offsetWidth,e.height=t.offsetHeight;const a=e.height-2,l=(e.width-2)/365,s=await fetch("js/data.json").then((t=>t.json()));for(const[t,e]of Object.entries(o))e.addEventListener("input",(e=>{c[t].textContent=e.target.value,d[t]=e.target.value/e.target.getAttribute("factor"),i()}));function i(){n.clearRect(0,0,e.width,e.height),n.fillStyle="#4CE0D2";const t=[],o=1e3*d.storage;t.push(o);const c=a/d.storage;let i=0,u=0,m=0,h=0;for(let e=0;e<s.Energy.length;e++){const r=d.solar*s.Energy[e]*d.efficiency+Math.min(d.htc*(s.Temperature[e]-d.indoorT)*24,0)+t[e];r>o?(t.push(o),h++,m+=r-o):r<0?(t.push(0),u++,i+=r):t.push(r);const g=e%365*l,f=a-t[e+1]/1e3*c;n.fillRect(g,f,2,2)}r.surplus.textContent=Math.round(m/11/1e3,0),r.deficit.textContent=Math.round(i/11/-1e3,0),r.full.textContent=Math.round(h/11,0),r.empty.textContent=Math.round(u/11,0)}i()}main();