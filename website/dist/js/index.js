async function main(){const t=document.getElementById("chart__canvas-container"),e=document.getElementById("canvas"),n=e.getContext("2d"),a=document.getElementById("deficitValue"),o=document.getElementById("emptyValue"),c=document.getElementById("surplusValue"),d=document.getElementById("fullValue"),l={indoorT:22,solarArea:20,efficiency:.6,htc:100,storage:50},u=await fetch("js/data.json").then((t=>t.json()));e.width=t.offsetWidth,e.height=t.offsetHeight;const r=e.height-5,i=(e.width-4)/365;n.strokeStyle="#4CE0D2",n.fillStyle="#4CE0D2",B();const s=document.getElementById("solar"),g=document.getElementById("solarValue");s.addEventListener("input",(t=>{const e=t.target.value;g.textContent=""+e,l.solarArea=t.target.value,B()}));const m=document.getElementById("efficiency"),h=document.getElementById("efficiencyValue");m.addEventListener("input",(t=>{h.textContent=t.target.value,l.efficiency=t.target.value/100,B()}));const y=document.getElementById("htc"),f=document.getElementById("htcValue");y.addEventListener("input",(t=>{f.textContent=t.target.value,l.htc=t.target.value,B()}));const E=document.getElementById("storage"),v=document.getElementById("storageValue");function B(){n.clearRect(0,0,e.width,e.height);const t=[],s=1e3*l.storage;t.push(s);const g=r/l.storage;let m,h,y,f=0,E=0,v=0,B=0;for(let e=0;e<u.Energy.length;e++)m=l.solarArea*u.Energy[e]*l.efficiency,h=Math.min(l.htc*(u.Temperature[e]-l.indoorT)*24,0),y=m+h+t[e],y>s?(B++,v=v+y-s,y=s):y<0&&(E++,f+=y,y=0),t.push(y),n.fillRect((e+1)%365*i,r-t[e+1]/1e3*g,2,2);c.textContent=Math.round(v/11/1e3,0),a.textContent=Math.round(f/11/-1e3,0),d.textContent=Math.round(B/11,0),o.textContent=Math.round(E/11,0)}E.addEventListener("input",(t=>{v.textContent=t.target.value,l.storage=t.target.value,B()}))}main();